<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<!--<script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>-->
<script src ="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<style>
/*@font-face {
  font-family: DS-Font;
  src: {{ url_for('static' , filename='DS-DIGIB.woff') }};
}*/

    @font-face {
    font-family: 'DS-Digital Bold';
    font-style: normal;
    font-weight: normal;
    src: local('DS-Digital Bold'), url('DS-DIGIB.woff'), format('woff');
    }

#txtTime{
  font-family: DS-Digital Normal;
  color: #ff0000;
  background-color: #000000
}
body{
    margin: 20px;
    color: #ffffff;
    background-color: #121212; /*#666*/
    text-align: center;
}
.content-box{    
    padding: 10px;
    margin:5px;
    background-color: #666;/*#ededed;*/

}

/* CAROUSEL   */

.carousel-item.active, .carousel-item-next, .carousel-item.-prev{
    display:block;
}

/*stickeynotes*/
#stickynotes {
  margin: 20px auto;
  font-family: 'Lato';
  color:#fff;
}

*{
  margin:0;
  padding:0;
}

.h2s {
  font-weight: bold;
}
.ps {
  font-family: 'Reenie Beanie';
}
#stickynotes,#stickynotes>li{
  list-style:none;
}
#stickynotes{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
#stickynotes li a{
  text-decoration:none;
  color:#000;
  background: #bb86fc; /*#ffc;*/
  display:block;
  height:10em;
  width:10em;
  padding:.7em;
  box-shadow: 5px 5px 7px rgba(33,33,33,.7);
  transform: rotate(-6deg);
  transition: transform .15s linear;
}

#stickynotes li:nth-child(even) a{
  transform:rotate(4deg);
  position:relative;
  top:5px;
  background:#cfc;
}
#stickynotes li:nth-child(3n) a{
  transform:rotate(-3deg);
  position:relative;
  top:-5px;
  background:#ccf;
}
#stickynotes li:nth-child(5n) a{
  transform:rotate(5deg);
  position:relative;
  top:-10px;
}

#stickynotes li a:hover,ul li a:focus{
  box-shadow:10px 10px 7px rgba(0,0,0,.7);
  transform: scale(1.25);
  position:relative;
  z-index:5;
}

#stickynotes li{
  margin:.7em;
}

#divfact{
    margin-top:100px;
    margin-left:-20px;
}

#mapdiv{
    margin-left:50px;
}

a{
    text-decoration: none;
    color:inherit;
}

#flagimg{
    height:100px;
    width:150px;
}

#googleMap{
    margin-top:10px;
    width:250px;
    height:250px;
}
</style>

<script src='//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'></script>
<!--<script>window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];  window.myWidgetParam.push({id: 11,cityid: '2961423',appid: 'd64cf9c8d8148b916b91265063c9005b',units: 'metric',containerid: 'openweathermap-widget-11',  });  (function() {var script = document.createElement('script');script.async = true;script.charset = "utf-8";script.src = "//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script, s);  })();</script>-->
<script>window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];  window.myWidgetParam.push({id: 12,cityid: '2961423',appid: 'd64cf9c8d8148b916b91265063c9005b',units: 'metric',containerid: 'openweathermap-widget-12',  });  (function() {var script = document.createElement('script');script.async = true;script.charset = "utf-8";script.src = "//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script, s);  })();</script>
</head>
<body onload="start()">

<div class="row">
    <div class="col-sm-4">
        <div class="border content-box">
            <div id="mapdiv">
                <div id="openweathermap-widget-12"></div>
            </div>
        <div class="row">
            <ul id="stickynotes">
                <li>
                    <a href="#" contenteditable>
                        <h4 class="h2s">Take a Dioralyte before you die!</h4>
                    </a>
                </li>
                <li>
                    <a href="#" contenteditable>
                        <h4 class="h2s">Supermac's Code:</h4>
                        <h3>justsuper</h3>
                    </a>
                </li>
            </ul>
        </div>
        </div>

    </div>

    <div class="col-sm-3">
        <div class="border content-box">
            <h2 id="txtDay"></h2>
            <h1 id="txtDate"></h1>
            <h1 id="txtTime"></h1>
            <div id="timeAlert">
                <h3 id="txtDiff"></h3>
            </div>
            <canvas id="canvas" width="200" height="200" style="background-color:#666"></canvas>
        </div>
    </div>
    <div class="col-sm-5">
        <div class="col-sm-7">
            <div id="divfac" class="border content-box">
                <h5>{{ fact[0] }}</h5>
            </div>
        </div>

        <div class="row">
            <div class="border content-box">
                <div class="row">
                   <div class="col-sm-5">
                       <h2>{{coun.title}}</h2>
                       <h3>{{coun.subregion}}</h3>
                       <h3>{{coun.capital}}</h3>
                       <h3>{{coun.timezone}}</h3>
                       <h3>{{coun.population}}</h3>
                       <p id="latlng" style="visibility:none;">{{coun.latlng}}</p>
                   </div>
                  
                  <div class="col-sm-7">
                    <img id="flagimg" class="img" src="{{coun.flagurl}}">
                    <div id="googleMap"></div>
                  </div>
                 </div>   
            </div>  
        </div>
    </div>
</div>
</div>



<div class="row">
    <div class="col-sm-6">
        <div class="border content-box">
            <div class="row">


                <div id="technewscarousel" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner" id="cList">
                        <div class="carousel-item active text-center p-4">
                            <h2>Crypto News Headlines</h2>
                        </div>


                        {% for item in newsstr[2] %}
                        <div class="carousel-item text-center p-4">
                            <a href= '{{item.url }}' target='_blank'>
                                <h4 class="newshead">{{ item.category }} : {{ item.title }}</h4>
                            </a>
                            <p>{{ item.content }}</p>

                        </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>




            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <div class="border content-box">
            <div class="row">

                <div id="irishnewscarousel" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <h2>News Headlines</h2>
                        </div>

                        {% for item in newsstr[1] %}
                        <div class="carousel-item text-center p-4">
                            <h4 class="newshead">{{ item.category }} : {{ item.title }}</h4>
                            <p>{{ item.content }}</p>
                        </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

</body>
<script>
function start(){
    startTime();
}

/* NEWS SEARCH  */
$(function(){
    $('#btnSearch').click(function(){
        var txt = document.getElementById("newssearch").value;
        $.ajax({
            type: 'POST',
            url: '/getNewsSearch',
            //data: $('#newssearch').val()
        })
        .done(function(data){
            var list = JSON.parse(data);
            $.each(list.newslist, function(index,item){
                    
                
                var div = document.createElement("div");
                var h2 = document.createElement("h2");
                var p = document.createElement("p");
                h2.innerHTML = item.title;
                p.innerHTML = item.content;
                //div.classList.add("carousel-item text-center p-4");
                
                
                $('#cList').append(div);
                $(div).append(h2);
                $(div).append(p);
                });
        })
        .fail(function(){
        return false;
        });
    });
});



/*function styleDay(i){
    if(i == 2){
        var txt = document.getElementById('txtDay');
        txt.style.color = "Red";
    }
}*/


function startTime(){

    var days = ['Sunday' , 'Monday :(' , 'TWO CHICKEN TUESDAY!!' , 'Wednesday' , 'Thursday' , 'Friday' , 'Saturday']; 

    var today = new Date();
    var y = today.getFullYear();
    var mth = today.getMonth();
    var d = today.getDate();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    m = checkTime(m);
    s = checkTime(s);
    d = checkTime(d);
    mth = checkTime(mth);
    document.getElementById('txtTime').innerHTML = h + " : " + m + " : " + s;
    document.getElementById('txtDate').innerHTML = d + " / " + mth + " / " + y;
    var daystr = days[(today.getDay())];
    document.getElementById('txtDay').innerHTML = daystr;
    var t = setTimeout(startTime,1000);
    timeDiff(today)
}

function timeDiff(today){
    var nextDate = new Date(today.getFullYear(),today.getMonth(), today.getDate(), 16, 20);
    if (nextDate < today){
        nextDate.setDate(nextDate.getDate() + 1);
    }
    
    var diff = nextDate - today;
    var msec = diff;
    var hh = Math.floor(msec / 1000 / 60 / 60);
    msec -= hh * 1000 * 60 * 60; 
    var mm = Math.floor(msec / 1000 / 60);
    msec -= mm * 1000 * 60;
    var ss = Math.floor(msec / 1000);
    msec -= ss * 1000;
    
    mm = checkTime(mm);
    ss = checkTime(ss);
    
    if(diff < 600,000)
    {
        document.getElementById('timeAlert').classList.add("alert alert-sucess"); 
        
    }
    
    document.getElementById('txtDiff').innerHTML = hh + " : " + mm + " : " + ss;
    
}

function checkTime(i){
    if(i<10){i = "0" + i}
    return i;

}


function myMap() {
var latlng = document.getElementById("latlng").innerHTML;
//latlng= latlng.replace('[','lat:').replace(',',',lng:').replace(']','');
latlng= latlng.replace('[','').replace(']','');
var s = latlng.split(",");
var slat = parseFloat(s[0]);
var slng = parseFloat(s[1]);
var mapProp= {
    
    center: {lat: slat, lng: slng},
    zoom:4,
    disableDefaultUI: true,
    zoomControl: true,
};
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
}




/* CAROUSEL */
$('.carousel').carousel({
    interval:20000
})

/*  STICKY NOTES  */

$(document).ready(function () {
  all_notes = $("li a");

  all_notes.on("keyup", function () {
    note_title = $(this).find("h2").text();
    note_content = $(this).find("p").text();

    item_key = "list_" + $(this).parent().index();

    data = {
      title: note_title,
      content: note_content
    };

    window.localStorage.setItem(item_key, JSON.stringify(data));
  });

  all_notes.each(function (index) {
    data = JSON.parse(window.localStorage.getItem("list_" + index));

    if (data !== null) {
      note_title = data.title;
      note_content = data.content;

      $(this).find("h2").text(note_title);
      $(this).find("p").text(note_content);
    }
  });
});

/*  CLOCK */
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var radius = canvas.height / 2;
ctx.translate(radius, radius);
radius = radius * 0.90;
setInterval(drawClock, 1000);


function drawClock() {
  drawFace(ctx, radius);
  drawNumbers(ctx, radius);
  drawTime(ctx, radius);
}

function drawFace(ctx, radius) {
  var grad;
  ctx.beginPath();
  ctx.arc(0, 0, radius, 0, 2*Math.PI);
  ctx.fillStyle = 'white';
  ctx.fill();
  grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
  grad.addColorStop(0, '#333');
  grad.addColorStop(0.5, 'white');
  grad.addColorStop(1, '#333');
  ctx.strokeStyle = grad;
  ctx.lineWidth = radius*0.1;
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
  ctx.fillStyle = '#333';
  ctx.fill();
}

function drawNumbers(ctx, radius) {
  var ang;
  var num;
  ctx.font = radius*0.15 + "px arial";
  ctx.textBaseline="middle";
  ctx.textAlign="center";
  for(num = 1; num < 13; num++){
    ang = num * Math.PI / 6;
    ctx.rotate(ang);
    ctx.translate(0, -radius*0.85);
    ctx.rotate(-ang);
    ctx.fillText(num.toString(), 0, 0);
    ctx.rotate(ang);
    ctx.translate(0, radius*0.85);
    ctx.rotate(-ang);
  }
}

function drawTime(ctx, radius){
    var now = new Date();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    //hour
    hour=hour%12;
    hour=(hour*Math.PI/6)+
    (minute*Math.PI/(6*60))+
    (second*Math.PI/(360*60));
    drawHand(ctx, hour, radius*0.5, radius*0.07);
    //minute
    minute=(minute*Math.PI/30)+(second*Math.PI/(30*60));
    drawHand(ctx, minute, radius*0.8, radius*0.07);
    // second
    second=(second*Math.PI/30);
    drawHand(ctx, second, radius*0.9, radius*0.02);
}

function drawHand(ctx, pos, length, width) {
    ctx.beginPath();
    ctx.lineWidth = width;
    ctx.lineCap = "round";
    ctx.moveTo(0,0);
    ctx.rotate(pos);
    ctx.lineTo(0, -length);
    ctx.stroke();
    ctx.rotate(-pos);
}

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-XLeI0f_wOHPS2zvOZZpsGkWes6nWZN0&callback=myMap"></script>

</html>